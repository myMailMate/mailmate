<label class="stack">
	<span class="fw:medium"> What would you like to name this template? </span>
	<input
		type="text"
		name="name"
		required
		autocomplete="off"
		autofocus
		placeholder="Welcome Email"
		data-lpignore="true"
		data-form-type="other"
	/>
</label>
<div class="flow fields">
	<label class="fw:medium" for="to">Who are you sending this to?</label>
	<div class="cluster">
		<input
			type="email"
			id="to"
			name="to"
			placeholder="user@email.com"
			data-lpignore="true"
			data-form-type="other"
		/>
		<button id="ccFieldButton" type="button" onclick="toggleCcField()">Cc</button>
		<button id="bccFieldButton" type="button" onclick="toggleBccField()">Bcc</button>
	</div>

	<div id="ccField" style="display: none" class="stack gap:-1">
		<label class="fw:medium" for="cc" data-lpignore="true" data-form-type="other">
			Who would you like to CC this email to?
		</label>
		<input type="email" id="cc" name="cc" placeholder="user@email.com" />
	</div>

	<div id="bccField" style="display: none" class="stack gap:-1">
		<label class="fw:medium" for="bcc" data-lpignore="true" data-form-type="other">
			Who would you like to CC this email to?
		</label>
		<input type="email" id="bcc" name="bcc" placeholder="user@email.com" />
	</div>
</div>

<label class="stack gap:-1">
	<span class="fw:medium"> Email Subject </span>
	<input
		type="text"
		name="subject"
		required
		placeholder="Welcome to our platform"
		data-lpignore="true"
		data-form-type="other"
	/>
	<div class="tag-bank stack"></div>
</label>

<label class="stack gap:-1">
	<span class="fw:medium"> Email Body </span>
	<!-- Drag-and-Drop Panel -->
	<div id="drag-panel">

		<div class="draggable" draggable="true" data-text="{@text:Enter Username|Username}">Username</div>
		<div class="draggable" draggable="true" data-text="{@date:Enter Date|2018-07-22}">Date</div>
	</div>

	<!-- Drop Area -->
	<textarea
		name="body"
		id="emailBody"
		required
		placeholder="Hi, welcome to our platform. We are excited to have you on board!"
	></textarea>
</label>

<a href="/guide" class="link" target="_blank"> ‚ùì Learn more about template formatting </a>

<style>
	#drag-panel {
		display: flex;
		gap: 10px;
		margin-bottom: 10px;
	}
	.draggable {
		padding: 5px 10px;
		background-color: lightblue;
		cursor: grab;
		border-radius: 5px;
	}
	#emailBody {
		min-height: 150px;
		width: 100%;
	}
</style>

<script>
	document.querySelectorAll(".draggable").forEach((item) => {
		item.addEventListener("dragstart", (event) => {
			event.dataTransfer.setData("text", event.target.getAttribute("data-text"));
		});
	});

	const emailBody = document.getElementById("emailBody");

	emailBody.addEventListener("dragover", (event) => {
		event.preventDefault();
	});

	emailBody.addEventListener("drop", (event) => {
		event.preventDefault();
		const text = event.dataTransfer.getData("text");
		const cursorPosition = emailBody.selectionStart;
		const currentText = emailBody.value;

		// Insert at cursor position
		emailBody.value =
			currentText.substring(0, cursorPosition) +
			text +
			currentText.substring(cursorPosition);
	});
</script>

